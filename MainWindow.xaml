<Window x:Class="BTApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:BTApp.Converters"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        mc:Ignorable="d"
        Title="Spółka Stolarczyk" Height="550" Width="800" ResizeMode="CanMinimize" >
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="ContentRendered">
            <i:InvokeCommandAction Command="{Binding OnWindowLoadedCommand}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding OnWindowUnloadedCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Window.Resources>
        <converters:PLCConnectionStatusToBitmapConverter x:Key="PLCConnectionStatusToBitmapConverter"/>
        <converters:PLCConnectionStatusToStringConverter x:Key="PLCConnectionStatusToStringConverter"/>
        <converters:BoolToSolidColorBrushConverter x:Key="BoolToSolidColorBrushConverter"/>
        <converters:PLCConnectionStatusToSolidBrushConverter x:Key="PLCConnectionStatusToSolidBrushConverter"/>
        <converters:MachineStatusToBitmapConverter x:Key="MachineStatusToBitmapConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="275"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="25"></RowDefinition>
        </Grid.RowDefinitions>
        <Border Grid.Column="0" Grid.Row="4" Grid.RowSpan="2" Grid.ColumnSpan="6" >
            <Border.Background>
                <SolidColorBrush Color="#FF0066CF" Opacity="0.25"/>
            </Border.Background>
        </Border>
        <TextBlock Text="Linia do rozcinania" FontSize="30"
                   VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="6"/>

        <Image Height="271" Source="Assets/Images/077.000_MIR.bmp" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="6"/>

        <TextBlock Grid.Row="2" Grid.Column="1" FontSize="16" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.ColumnSpan="4" Grid.RowSpan="1" TextWrapping="Wrap"
                   Margin="5,0,0,0">
            <Run Text="Stan maszyny:"/>
            <Run Text="{Binding machineStatus}" FontWeight="SemiBold"/>
        </TextBlock>
        <Image Source="{Binding machineStatus, Converter={StaticResource MachineStatusToBitmapConverter}}" Grid.Column="0" Grid.Row="2" Grid.RowSpan="1" HorizontalAlignment="Right"
               Width="40" Height="40" Margin="0,0,0,0"/>

        <TextBlock Text="Aktualna produkcja" FontSize="26" TextWrapping="Wrap" HorizontalAlignment="Center"  VerticalAlignment="Bottom" Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="6"/>
        <TextBlock Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" Grid.RowSpan="2" FontSize="26" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="40,0,0,0">
                <Run Text="{Binding CurrentLengthExecuted, StringFormat={}{0:0.0}}" Foreground="DarkBlue"/>
                <Run Text="/"/>
                <Run Text="{Binding OrderLength}"/>
                <Run Text="mb."/>
        </TextBlock>

        <TextBlock Grid.Column="0" Grid.Row="4" FontSize="26" VerticalAlignment="Center" HorizontalAlignment="Right" Grid.RowSpan="2" >
            <Run Text="{Binding OrderQuantity}"/>
            <Run Text=" szt."/>
        </TextBlock>
        <TextBlock Grid.Column="3" Grid.Row="4" FontSize="26" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.RowSpan="2" Grid.ColumnSpan="2" >
            <Run Text="{Binding OrderTotalLength}"/>
            <Run Text=" mb."/>
        </TextBlock>
        <TextBlock Grid.Column="5" Grid.Row="4" FontSize="26" VerticalAlignment="Center" HorizontalAlignment="Left" Grid.RowSpan="2" >
            <Run Text="{Binding OrderHeater}"/>
            <Run Text=" °C"/>
        </TextBlock>

        <Button Content="Ostatnie zlecenie" Grid.Column="5" Grid.Row="3" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" 
                Margin="5,5,10,5" Command="{Binding ShowLastOrderCommand}"/>
        <StatusBar Grid.Row="6" Grid.ColumnSpan="6">
            <StatusBarItem Width="260">
                Numer seryjny: 512NRS150011122020
            </StatusBarItem>
            <Separator Width="1"/>
            <StatusBarItem Width="260">
                Data produkcji: 11.12.2020
            </StatusBarItem>
            <Separator Width="1"/>
            <StatusBarItem Width="260">
                <TextBlock Text="{Binding isPLCConnected, Converter={StaticResource PLCConnectionStatusToStringConverter}}"/>
            </StatusBarItem>
        </StatusBar>


    </Grid>
</Window>
